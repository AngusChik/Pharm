{% extends "base.html" %}

{% block title %}Add New Product{% endblock %}

{% block content %}
<h1 style="text-align: center; margin-bottom: 20px;">Add New Product</h1>

<style>
    form {
        max-width: 600px;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: 8px; /* Minimized space between input fields */
    }

    label {
        font-weight: bold;
        margin-bottom: 2px; /* Reduce label spacing */
    }

    input, textarea, select, button {
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 14px;
    }

    button {
        background-color: #4CAF50;
        color: white;
        border: none;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }

    button:hover {
        background-color: #45a049;
    }

    #autofillButton {
        background-color: #007bff;
        color: white;
        margin-bottom: 15px; /* Space above the form */
    }

    #autofillButton:hover {
        background-color: #0056b3;
    }
</style>

{% if messages %}
   <div class="alert-container">
       {% for message in messages %}
           <div class="alert {{ message.tags }}">{{ message }}</div>
       {% endfor %}
   </div>
{% endif %}

<!-- Auto-Fill Button -->
<div style="text-align: center;">
    <button type="button" id="autofillButton">Auto-Fill Sample Data</button>
</div>

<!-- Add Product Form -->
<form method="post" id="productForm">
    {% csrf_token %}
    <input type="hidden" name="next" value="{{ next }}"> <!-- Pass the next parameter -->

    <div>
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
    </div>

    <div>
        <label for="item_number">Item Number:</label>
        <input type="text" id="item_number" name="item_number" required>
    </div>

    <div>
        <label for="brand">Brand:</label>
        <input type="text" id="brand" name="brand" required>
    </div>

    <div>
        <label for="barcode">Barcode:</label>
        <input type="text" id="barcode" name="barcode" required>
    </div>

    <div>
        <label for="price">Price:</label>
        <input type="number" id="price" name="price" step="0.01" required>
    </div>

    <div>
        <label for="quantity_in_stock">Quantity:</label>
        <input type="number" id="quantity_in_stock" name="quantity_in_stock" required>
    </div>

    <div>
        <label for="description">Description:</label>
        <textarea id="description" name="description"></textarea>
    </div>

    <div>
        <label for="category">Category:</label>
        <select id="category" name="category" required>
            {% for category in categories %}
            <option value="{{ category.id }}">{{ category.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div>
        <label for="unit_size">Unit Size:</label>
        <input type="text" id="unit_size" name="unit_size" required>
    </div>

    <button type="submit">Add Product</button>
</form>

<script>
    // JavaScript to auto-fill the form with sample data
    document.getElementById('autofillButton').addEventListener('click', function () {
        document.getElementById('name').value = "Sample Product Name";
        document.getElementById('item_number').value = "123456";
        document.getElementById('brand').value = "Sample Brand";
        document.getElementById('barcode').value = "1234567890123"; // Example barcode
        document.getElementById('price').value = "9.99"; // Example price
        document.getElementById('quantity_in_stock').value = "100";
        document.getElementById('description').value = "This is a sample product description.";
        
        // Select a category by default (first one in the dropdown)
        const categorySelect = document.getElementById('category');
        if (categorySelect.options.length > 0) {
            categorySelect.value = categorySelect.options[0].value;
        }
        
        document.getElementById('unit_size').value = "500ml";
    });
</script>

{% endblock %}
